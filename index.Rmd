---
title: "CPLN 6890 Data Store"
author: "Michael Fichman"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(sf)
library(mapview)
library(kableExtra)
```

# About

This page consolidates data links and sources for students in CPLN 6890 - The City at Night - at the University of Pennsylvania's Weitzman School of Design, Department of City and Regional Planning.

During the Fall semester of 2025, students will undertake nighttime Area Studies of five Philadelphia sites. Part of this process will involve data analysis of relevant information - public safety incidents, zoning, business licenses, and more.

Many useful data sources are consolidated on this site for ease of access.

# Map of Area Study Sites

The following map shows the five study areas.

You can grab spatial data delineating the boundaries of the study areas as shp (in a zipfile), or as geojson in the "study_areas" folder in the [class GitHub Repo](https://github.com/mafichman/cpln_6890/tree/main/study_areas/2025).


```{r}
study_areas <- st_read("https://raw.githubusercontent.com/mafichman/cpln_6890/refs/heads/main/study_areas/2025/geojson/study_areas_2025.geojson")

mapview(study_areas, label = study_areas$Name)

```

The following sections are under construction, and will be filled with relevant data sets for Area Study #2.

# Philadelphia Atlas

[atlas.phila.gov](https://atlas.phila.gov) is a very high quality viewer for many of the data sets mentioned below. It's a great place to start your investigation of your area or to investigate an individual site in detail. It's perhaps the best place to find information about zoning overlays.

# Land Use

[City of Philadelphia Zoning](https://opendataphilly.org/datasets/zoning-base-districts/)

[City of Philadelphia Zoning Overlays](https://opendataphilly.org/datasets/zoning-overlays/)

[City of Philadelphia Special Vending Districts](https://opendataphilly.org/datasets/special-vending-districts/)

You can consult [Section 14-602 of the Philadelphia Code](https://codelibrary.amlegal.com/codes/philadelphia/latest/philadelphia_pa/0-0-0-292339) to understand what kinds of uses are prohibited in each zoning district.

# Licensing

[PA Liquor Control Board Licenses - Philadelphia County](https://github.com/mafichman/cpln_6890/blob/main/plcb_licenses/PHL_PLCB_geocoded.csv)

[City of Philadelphia Business Activity Licenses](https://opendataphilly.org/datasets/licenses-and-inspections-business-licenses/)

# Google Places

I pulled data from the Google Places API for several categories - "point of interest", "restaurant", "Night club", and "store" - and then created columns that represent opening and closing times for each day of the week - 0 (Sunday) through 6 (Saturday). There are also true/false columns that represent the point of interest type (e.g. "Restaurant" or "Gas Station")

There are several important considerations about these data:

1. These data extend outside the study boundaries. Use a spatial join or select by location to exclude unwanted data points.

2. The Google Places API is not perfect - I pulled data for a handful of business categories but there are *absolutely* some businesses that were missed in the searches, and there are inaccurate data from user input.

3. You will need to clean these data a bit. Places that are open 24 hours show "NA" for closing times... but places that are just plain missing information... also show NA.  You will need to pick through and figure out what's what. There are also some places that have multiple closing times on a given day ... for example if you close at 2AM on Saturday night (e.g. 0200 on Sunday), and 11PM on Sunday night (e.g. 2300 on Sunday), you will have multiple times listed for a given day.


[Google Places Data Set](https://github.com/mafichman/cpln_6890/blob/main/places/google_places_92225.geojson)

# Public Safety

[Philadelphia Police Department Crime incidents](https://opendataphilly.org/datasets/crime-incidents/)

[City of Philadelphia Licenses and Inspections - Code Violations and Permit Refusals](https://opendataphilly.org/datasets/licenses-and-inspections-appeals-of-code-violations-and-permit-refusals/)

# Mobility And Transportation

[Philadelphia Nighttime Data Dashboard - Safegraph 2018 data summary](https://sabrinasmlee.github.io/exploratory_page/home.html)

[Nighttime Data Dashboard - Raw Geojsons with Origin-Destination data](https://github.com/mafichman/musa_practicum_nighttime/tree/main/Corridor_CBG_geojsons)

[Kornhauser, Rawn and Lee, 2021 - Documentation](https://pennmusa.github.io/MUSA_801.io/project_21/index.html#1_Introduction)

[IndeGo Trip Data](https://www.rideindego.com/about/data/)

[SEPTA Stops, Routes and Locations](https://opendataphilly.org/datasets/septa-routes-stops-locations/)

# Political Boundaries

Police Districts

Council Districts

Registered Community Organizations

Commercial Corridor Boundaries